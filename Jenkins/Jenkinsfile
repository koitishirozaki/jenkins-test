node {
    switch (env.BRANCH_NAME) {
        case 'builds/Thing':
            checkout scm
            stage('Checkout') {
                bat 'git fetch'
                bat 'git checkout builds/Thing'
                bat 'git pull'
                bat 'type NUL > log.txt'
                bat "type NUL > log${env.BUILD_NUMBER}.txt"
            }

            stage('Commit') {
                withCredentials([gitUsernamePassword(credentialsId: 'koiti-github-pat', gitToolName: 'Default')]) {
                    bat "${env.WORKSPACE}\\Jenkins\\gitsetup.bat"
                    bat "${env.WORKSPACE}\\Jenkins\\commit.bat"
                }
            }
            break
    }
}
